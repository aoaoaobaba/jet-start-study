# 一覧表の扱い

本ドキュメントは、SPA構成における業務システム画面設計において、「一覧表（データテーブル）」を利用する画面のパターンと、それぞれの設計指針を定めたものである。

## 1. 一覧＋モーダル編集パターン

### 1.1 概要
- 各行は参照・編集・削除・コピーが可能。
- 編集・参照はモーダル画面で表示。
- 1件ごとの独立したデータ編集に適する。
- **選択方式は `select:row`**

### 1.2 行操作
- 行頭にアイコンボタンを配置（編集／削除／参照／コピー）
  - コピーは複数選択不可のため、行単体で実行。
  - 編集・参照はモーダルで表示。
- 操作アイコンの説明性を考慮し、MDIアイコンを使用。
- スマホ・タブレットに配慮し、ダブルクリックは使用不可。

### 1.3 チェックボックス対応
- 行選択用途としてチェックボックス列を使用。
- 複数行の操作（例：一括削除）時に使用。
- コピー操作時は1行のみ選択可能にバリデーション。

### 1.4 新規追加
- **一覧末尾に追加**
- 再検索は原則行わず、必要時のみ。直前の検索条件＋ページを維持。

### 1.5 ページング・フィルタ・ソート
- クライアント側フィルタ・ソートを使用。
- ページ単位でデータ取得するため、他ページのデータには反映されない。
- 検索条件の変更は検索ボタンを押すまでは反映しない。

### 1.6 検索条件・メッセージ表示
- 検索条件は画面上に保持。モーダル操作後も維持。
- エラー表示は画面上部メッセージ欄を使用。
- ツールチップによる補足あり（マウス操作のみ）。
- エラーが複数ある場合は、1件＋残件数を表示。

---

## 2. 一覧直接メンテナンスパターン

### 2.1 概要
- モーダルは原則使用しない。
- 複数行のデータ編集を前提とする。
- 編集状態の保存は一括保存。
- 編集後は元データと比較し、変更有無を表示する。
- **選択方式は `select:cell`**

### 2.2 行操作
- 行頭に操作ボタン（メニューアイコン）を配置。
- コンテキストメニュー（タップ対応）で「削除」「取消」等を実行。
- ステータス（新規／変更／削除）は文字で行頭に明示。

### 2.3 編集モード
- 編集開始：フォーカス後にクリック、またはSPACEキー
- 編集開始時は自動で文字列を全選択
- 編集不可セルはグレー背景で明示

### 2.4 チェックボックス列
- 複数行選択操作用に常設
- 一括削除ボタンは一覧外に配置

### 2.5 行追加
- 選択行がある場合は、その直下に追加
- 未選択時は一覧末尾に追加
- 順番の重要性がある業務ではドラッグ並び替え対応可

### 2.6 エラー表示
- クライアントチェックで全項目一括判定
- 最初のエラーセルに自動でフォーカス＆編集開始
- 各セルに赤枠＋ツールチップ表示（マウス環境のみ）
- 上部メッセージ欄にも、エラー1件＋残件数を表示
- エラーが複数ある場合、順に表示・修正できる設計

### 2.7 コピー＆貼り付け
- 複数セルの貼り付け対応
- データが足りない場合は自動で行を追加
- 編集不可列には反映されない
- 入力可能セルは白背景、不可はグレー

---

## 3. 共通事項

- メッセージは画面上部の専用欄に表示。
- 検索条件の保持／復元は画面ごとの仕様で必要時に実装。
- データの状態（新規／変更／削除）は色＋文字で判別可能に。
